<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  <link rel="stylesheet" href="index.css">
  <title>NoNego ðŸ’¸ðŸ’»</title>
</head>
<body>

  <section class="container-fluid">
    <section class="row logo">
      <p >NoNego ðŸ’¸ðŸ’»</p>
    </section>
    <section class="row justify-content-center">
      <section class="col-12 col-sm-6 col-md-3">
        <form class="form-container">
          <div class="form-group">
            <label for="exampleInputEmail1">Email address</label>
            <input type="email" class="form-control" id="inputEmail" aria-describedby="emailHelp" placeholder="Enter email">
            <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
          </div>
          <div class="form-group">
            <label for="exampleInputPassword1">Password</label>
            <input type="password" class="form-control" id="inputPass" placeholder="Password">
          </div>
          <button type="submit" class="btn btn-primary" id="LogInButton">Log In</button>
          <a href="">Click Here To Sign Up</a>
        </form>
      </section>
    </section>
  </section>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="script.js"></script>

<script>

    var settings = {
    "async": true,
    "crossDomain": true,
    "url": "https://studentcrud-a7cf.restdb.io/rest/nonegoidassignment",
    "method": "GET",
    "headers": {
      "content-type": "application/json",
      "x-apikey": "5ffd5eb61346a1524ff12901",
      "cache-control": "no-cache"
    }
  }

  $.ajax(settings).done(function (response) {
    console.log(response);
    console.log(response[0].useremail + response[0].userpass);

    document.getElementById("LogInButton").addEventListener("click", function()
    {

      var inputEmail = document.getElementById("inputEmail").value;
      var inputPass = document.getElementById("inputPass").value;

      var i = CheckUserExists(inputEmail, inputPass);

      if (i === 1)
      {
        redirectHomePage();
      }
      if (i === 2)
      {
        alert("Wrong Password");
      }
      else 
      {
        alert("ACCOUNT DOES NOT EXIST");
      }

    });

    function CheckUserExists(email, password) {

      for (i=0; i < response.length; i++)
      {
        if (inputEmail.value == response[i].useremail && inputPass.value == response[i].userpass )
        {
          return 1; 
        }
        else if (inputEmail.value == response[i].useremail && inputPass.value != response[i].userpass)
        {
          return 2;
        }
      }
      return 3;
    }

    function redirectHomePage() {
      window.location.href = "file:///D:/School/Year%201.2/Interactive%20Development/Assignment%203/ID_Louwen-ZhiHong_Assignment-3/personalization.html";
    }

  });
</script>

</body>
</html>