<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  <style>
    body{

      background-image: url(media/LoginForumBG.jpeg);
      background-size: cover;
      background-attachment: fixed;
      animation: transitionIn 0.75s;

      overflow-x: hidden;
    }

    .bg-dandelion {
        background: rgb(232,196,82);
        background: linear-gradient(90deg, rgba(232,196,82,1) 0%, rgba(214,189,90,1) 50%, rgba(232,196,82,1) 100%);
      }

      .bg-carbon {
        background-color: #42413D;
      }

      .bg-ash {
        background-color: #B2AFAC;
      }

      .bg-dust{
        background-color: #959492;
      }

  </style>
  <title>NoNego ðŸ’¸ðŸ’» - My Account</title>
</head>
<body>
  <header>
    <nav class="navbar navbar-expand-lg navbar-light bg-carbon">
        <div class="container-fluid">
            <a class="navbar-brand fs-2 text-white" href="#">NoNego!</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto fs-4">
                    <li class="nav-item">
                        <a href="home.html" class="nav-link active text-white" aria-current="page">Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="home.html#shop" class="nav-link text-white">Shop</a>
                    </li>
                    <li class="nav-item">
                        <a href="personalization.html" class="nav-link text-white">My Account</a>
                    </li>
                    <li class="nav-item">
                        <a href="myCart.html" class="nav-link text-white myCart">My Cart</a>
                    </li>
                </ul>
            </div>
          </div>
      </nav>
  </header>

  <section>
    <div class="row d-flex justify-content-center" style="margin-top: 50px;">
      <div class="col-5 title text-center mt-3 bg-ash">
          <h4 class="fs-1">Edit/Create Avatar</h4>
      </div>
    </div>
    <div class="row d-flex justify-content-center">
        <div class="col-10 text-left bg-dandelion pb-3">
            <h3>How To Create An Avatar?</h3>
            <h5>1) Click on "Create Avatar Button"</h5>
            <h5>2) Choose Your Character's Gender </h5>
            <h5>3) Feel Free to Mix and Match with the Assets and Features on Display! </h5>
        </div>
    </div>
    <div class="row d-flex justify-content-center">
        <div id="AvtarPicSpace" class="pt-5 pb-5 col-4 bg-dandelion" style="justify-content: center;">
          <img id="sampleAvatar" src="https://gutta.lv/wp-content/uploads/2015/10/test-img.jpg" class="card-img-top" id="prodImg2" alt="...">
        </div>

        <div class="col-6 text-center bg-dust">

          <button class="btn btn-primary" style="margin-top: 22.5%;" id="CreatAvtarButton" onclick="viewAvatarNav()">Click Here To Create Avatar</button>

          <div id="deniedLottieAvatar" style="display: flex; justify-content: center;">
            <lottie-player src="https://assets1.lottiefiles.com/packages/lf20_h3Bz5a.json"  background="transparent"  speed="1"  style="width: 150px; height: 150x;"  loop  autoplay></lottie-player> 
          </div>
          <div id="successLottieAvatar" style="display: flex; justify-content: center;">
            <lottie-player src="https://assets7.lottiefiles.com/packages/lf20_tAtUrg.json"  background="transparent"  speed="1"  style="width: 150px; height: 150px;"  loop  autoplay></lottie-player>
          </div>

          <section id="overridePrevAvatar" style="margin-top: 20%;">
            <h3 class="text-light">Would you like to Override.<br>Your Current Avatar?</h3>
            <button class="btn btn-success" onclick="overrideNo()">No</button>
            <button class="btn btn-danger " onclick="overrideYes()">Yes</button>
          </section>
          

          <!-- Edit/Create Avtar Nav Bar -->
          <nav id="CavtarNavBar"class="navbar navbar-expand-lg navbar-light bg-white">

            <div class="container-fluid">
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
              </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav fs-4">
                        <li class="nav-item">
                            <a href="#" onclick="avGender()" class="nav-link text-dark">Gender</a>
                        </li>
                        <li class="nav-item">
                          <a href="#" onclick="avAssets()" class="nav-link text-dark">Assets</a>
                      </li>
                        <li class="nav-item">
                            <a href="#" onclick="avSkin()" class="nav-link text-dark">Skin</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" onclick="avHair()" class="nav-link text-dark">Hair</a>
                        </li>
                        <li class="nav-item">
                          <a href="#" onclick="avTops()" class="nav-link text-dark">Tops</a>
                      </li>
                    </ul>
                </div>
              </div>

            </nav>


          <!-- Gender -->
        <section id="CavatarGender" style="margin-top: 60px;">
            <div class="form-check">
              <label class="form-check-label">
                <input type="radio" id="avatarGMale" class="form-check-input" name="optradio" value="male">Male
              </label>
            </div>
            <div class="form-check">
              <label class="form-check-label">
                <input type="radio" id="avatarGFemale" class="form-check-input" name="optradio" value="female">Female
              </label>
            </div>
        </section>


        <!-- Skin -->
        <section id="CavatarSkin" style="margin-top: 60px;">

          <div>
            <button id="AvatardarkBrownSkin">Dark Brown</button><br>
            <button id="AvatarlightBrownSkin">Light Brown</button><br>
            <button id="AvatarfairSkin">Fair</button><br>
          </div>

        </section>

        <!-- Hair -->
        <section id="CavatarHair" style="margin-top: 60px;">

          <h2>Hair Type</h2>
          <button onclick="EditAvatarAsset('18', localStorage.getItem('AvatarKey'))">Short Bob</button><br>
          <button onclick="EditAvatarAsset('76', localStorage.getItem('AvatarKey'))">Curly</button>

          <br><h2>Hair Colour</h2>
          <button onclick="EditAvatarAssetColour(localStorage.getItem('AvatarKey'), 'hair', '190F07')">Black</button><br>
          <button onclick="EditAvatarAssetColour(localStorage.getItem('AvatarKey'), 'hair', 'C0C0C0')">Grey</button><br>
          <button onclick="EditAvatarAssetColour(localStorage.getItem('AvatarKey'), 'hair', 'EDC5A7')">Blonde</button><br>
          <button onclick="EditAvatarAssetColour(localStorage.getItem('AvatarKey'), 'hair', '800000')">Brown</button>
        </section>

        <!-- Glasses -->
        <section id="CavatarExpressions" style="margin-top: 60px;">
          <button onclick="EditAvatarAsset('123', localStorage.getItem('AvatarKey'))" id="AvatarAviatorGlasses">Aviator Glasses</button><br>
          <button onclick="EditAvatarAsset('124', localStorage.getItem('AvatarKey'))" id="Wraps">Wraps</button><br>
          <button onclick="EditAvatarAsset('125', localStorage.getItem('AvatarKey'))" id="BigGlasses">Big Glasses</button>
        </section>

        <!-- Tops -->
        <section id="CavatarTops" style="margin-top: 60px;">
          <button onclick="EditAvatarAsset('35', localStorage.getItem('AvatarKey'))">Racing Leathers</button><br>
          <button onclick="EditAvatarAsset('44', localStorage.getItem('AvatarKey'))">Camouflage</button><br>
          <button onclick="EditAvatarAsset('45', localStorage.getItem('AvatarKey'))">Suit</button><br>
          <button onclick="EditAvatarAsset('677', localStorage.getItem('AvatarKey'))">zombie clothes</button>
        </section>

        <div id="cfmAvatar" style="margin-top: 60px;">
            <button class="btn btn-dark" onclick="FinishAvatar()">Finalise Avatar</button>
        </div>

        </div>

    </div>
    <div>
  </section>


  <section>

    <div class="row d-flex justify-content-center">
      <div class="col-5 title text-center bg-dust" style="margin-top: 100px;">
          <h4 class="fs-1 text-dark">Account Personalization</h4>
      </div>
    </div>
    <div class="row d-flex justify-content-center" style="margin-bottom: 90px;">
        <div class="col-10 bg-dandelion">

          <!-- Change Account Email and Pass -->
          <h2 class="pt-5"><i>Edit Account Details</i></h2>
          <form class="w-50">
            <div class="form-group">
              <label for="exampleInputEmail1">Email address</label>
              <input type="email" class="form-control" id="inputEmail" aria-describedby="emailHelp" placeholder="Enter email">
            </div>
            <div class="form-group">
              <label for="exampleInputPassword1">Password</label>
              <input type="password" class="form-control" id="inputPass" placeholder="Password">
            </div>
          </form>
          <button class="btn btn-success" onclick="makeChanges()">Make Changes</button>

          <!-- Dark mode switch -->
          <div class="form-check form-switch pt-5">
            <label class="form-check-label" for="flexSwitchCheckDefault">Dark Mode</label>
            <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" />
          </div>

          <div class="text-center">
            <h1>Friend's List</h1>
            <div style="overflow: scroll;">

              <table class="table">
                <thead>
                  <tr class="bg-light">
                    <th>Avatar</th>
                    <th scope="col">Email</th>
                    <th scope="col">Membership</th>
                    <th scope="col">Points</th>
                  </tr>
                </thead>
                <tbody id="friendsTable">

                </tbody>
              </table>

              
            </div>
            <button id="afBtn" onclick="AddFriend()" type="button" class="btn btn-success">Add Friend</button>
            <button id="dfBtn" onclick="DeleteFriend()" type="button" class="btn btn-danger">Delete Friend</button>
          </div>

          <div id="addFriendTab">
            <div class="form-group" id="addFriendForm">
              <label for="addFriend">Email address</label>
              <input type="email" class="form-control w-50" id="addFriend" aria-describedby="emailHelp" placeholder="Enter email">
              <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
            </div>
          </div>
          <div>
            <button class="btn-success" id="submitAddFriends">Submit</button>
          </div>

          <div id="deleteFriendTab">
            <h3>Select Friend(s) You wish to Remove</h3>
          </div>
            <button class="btn-danger" id="cfmDelFriends" onclick="cfmDelFriends()">Confirm Delete</button>
        </div>

    </div>

  </section>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <script src="script.js"></script>
  <script>

    /////////// Animations ///////////////////
    $("#deniedLottieAvatar").hide();
    $("#successLottieAvatar").hide();

    //////////////////////////////////////////

    $('#addFriendTab').hide();
    $('#submitAddFriends').hide();
    $('#deleteFriendTab').hide();
    $('#cfmDelFriends').hide();
    $('#overridePrevAvatar').hide();
    $('#cfmAvatar').hide();

    $('#CavtarNavBar').hide();
    
    $('#CavatarGender').hide();
    $('#CavatarSkin').hide();
    $('#CavatarHair').hide();
    $('#CavatarExpressions').hide();
    $('#CavatarTops').hide();

    ///////////////////////////////////////
    function avGender()
    {
      $('#CavatarGender').show();
      $('#CavatarSkin').hide();
      $('#CavatarHair').hide();
      $('#CavatarExpressions').hide();
      $('#CavatarTops').hide();
    }
    document.getElementById("avatarGMale").addEventListener("click", function()
    {
      createAvatar("1101");
    });
    document.getElementById("avatarGFemale").addEventListener("click", function()
    { 
      createAvatar("1102");
    });

    ///////////////////////////////////////
    function avAssets()
    {
      $('#CavatarExpressions').show();
      $('#CavatarGender').hide();
      $('#CavatarSkin').hide();
      $('#CavatarHair').hide();
      $('#CavatarTops').hide();
    }

    ///////////////////////////////////////
    function avSkin()
    {
      $('#CavatarSkin').show();
      $('#CavatarHair').hide();
      $('#CavatarExpressions').hide();
      $('#CavatarGender').hide();
      $('#CavatarTops').hide();
    }
    document.getElementById("AvatardarkBrownSkin").addEventListener("click", function()
    { 
      let aCode = localStorage.getItem("AvatarKey");
      EditAvatarSkin("8D5524", aCode);
    });
    document.getElementById("AvatarlightBrownSkin").addEventListener("click", function()
    { 
      let aCode = localStorage.getItem("AvatarKey");
      EditAvatarSkin("f1c27d", aCode);
    });
    document.getElementById("AvatarfairSkin").addEventListener("click", function()
    { 
      let aCode = localStorage.getItem("AvatarKey");
      EditAvatarSkin("ffdbac", aCode);
    });

    ///////////////////////////////////////

    function avHair()
    {
      $('#CavatarHair').show();
      $('#CavatarGender').hide();
      $('#CavatarSkin').hide();
      $('#CavatarExpressions').hide();
      $('#CavatarTops').hide();
    }

    function avTops()
    {
      $('#CavatarTops').show();
      $('#CavatarHair').hide();
      $('#CavatarGender').hide();
      $('#CavatarSkin').hide();
      $('#CavatarExpressions').hide();
    }

function FinishAvatar()
{
  var avPicSrc = document.getElementById("avatarPic");

  if (avPicSrc === null)
  {
      $('#cfmAvatar').hide();
      $('#CavtarNavBar').hide();
      $('#CavatarTops').hide();
      $('#CavatarHair').hide();
      $('#CavatarGender').hide();
      $('#CavatarSkin').hide();

      $('#CavatarExpressions').hide();
      $("#deniedLottieAvatar").fadeIn();
      $("#deniedLottieAvatar").fadeOut(3750);

      setTimeout(msgAnimation, 3750);
          
      function msgAnimation(){
        $('#cfmAvatar').show();
        $('#CavtarNavBar').show();
        alert("Invalid Avatar");
      }
  }
  
  if (avPicSrc.src == "https://stopscratchingtables.github.io/ID_Louwen-ZhiHong_Assignment-3/undefined" || avPicSrc.src == "file:///D:/School/Year%201.2/Interactive%20Development/Assignment%203/ID_Louwen-ZhiHong_Assignment-3/undefined")
  {

    $('#cfmAvatar').hide();
    $('#CavtarNavBar').hide();
    $('#CavatarTops').hide();
    $('#CavatarHair').hide();
    $('#CavatarGender').hide();
    $('#CavatarSkin').hide();

    $('#CavatarExpressions').hide();
    $("#deniedLottieAvatar").fadeIn();
    $("#deniedLottieAvatar").fadeOut(3750);

    setTimeout(msgAnimation, 3750);
        
    function msgAnimation(){
      $('#cfmAvatar').show();
      $('#CavtarNavBar').show();
      alert("Invalid Avatar");
    }

  }
  else
  {
    $('#cfmAvatar').hide();
    $('#CavtarNavBar').hide();
    $('#CavatarTops').hide();
    $('#CavatarHair').hide();
    $('#CavatarGender').hide();
    $('#CavatarSkin').hide();

    makeChangesAvatar(avPicSrc.src);

    $("#successLottieAvatar").fadeIn();
    $("#successLottieAvatar").fadeOut(3750);

    setTimeout(msgAnimation, 3750);
        
    function msgAnimation(){
      $('#cfmAvatar').show();
      $('#CavtarNavBar').show();
    }
  }
}

// DISPLAYING FRIENDS LIST
var friendsList = localStorage.getItem("friendsList").split(",");

var settings = {
    "async": true,
    "crossDomain": true,
    "url": "https://studentcrud-a7cf.restdb.io/rest/nonegoidassignment",
    "method": "GET",
    "headers": {
      "content-type": "application/json",
      "x-apikey": "5ffd5eb61346a1524ff12901",
      "cache-control": "no-cache"
    }
  }

  $.ajax(settings).done(function (response) {

    console.log(friendsList);

    for (var i = 0; i < friendsList.length; i++)
    {
      for (var x = 0; x < response.length; x++)
      {
        if (friendsList[i] == response[x].useremail)
        {
          document.getElementById("friendsTable").innerHTML += 
          `<tr class="bg-light">
              <th scope="row"><img src='${response[x].userAvatar}''></img></th>
              <td>${response[x].useremail}</td>
              <td>${response[x].userMembership}</td>
              <td>${response[x].userPoints}</td>
          </tr>`
        }
      }
    }

  });

function AddFriend()
{
  $('#addFriendTab').show();
  $('#submitAddFriends').show();
  $('#afBtn').hide();
  $('#dfBtn').hide();
}

function DeleteFriend()
{

  $('#deleteFriendTab').show();
  $('#afBtn').hide();
  $('#dfBtn').hide();

  for (var i = 0; i<friendsList.length; i++)
  {
    document.getElementById("deleteFriendTab").innerHTML += `
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="userFriends" value="${friendsList[i]}" id="flexCheckDefault">
      <label class="form-check-label" for="flexCheckDefault">
        ${friendsList[i]}
      </label>
    </div>
    `;
  }

  $('#cfmDelFriends').show();

}

function cfmDelFriends()
{

  const checkboxes = document.querySelectorAll('input[name="userFriends"]:checked');

  let checkedFriends = [];
  checkboxes.forEach((checkbox) => {
    checkedFriends.push(checkbox.value);
  });

  for (i = 0; i < checkedFriends.length; i++)
  {
    removeElement(friendsList, checkedFriends[i]);
  }

  function removeElement(array, elem) {
    var index = array.indexOf(elem);
    if (index > -1) {
        array.splice(index, 1);
    }
  }

  var newFriends = friendsList.toString();
  localStorage.setItem("friendsList", newFriends);
  UpdateFriendsList(newFriends);

}

var submitNewFriends = document.getElementById("submitAddFriends");

submitNewFriends.addEventListener("click", function()
{

  var x = document.getElementById("addFriend");
  console.log(x.value)
  var settings = {
    "async": true,
    "crossDomain": true,
    "url": "https://studentcrud-a7cf.restdb.io/rest/nonegoidassignment",
    "method": "GET",
    "headers": {
      "content-type": "application/json",
      "x-apikey": "5ffd5eb61346a1524ff12901",
      "cache-control": "no-cache"
    }
  }

  $.ajax(settings).done(function (response) {

    var result = CheckUserExists(response, x.value);
    console.log(result);
    if (result == 2 || x.value == "")
    {
      alert("Account does not exist");
    }
    else if (result == 1)
    {
      var y = CheckFriendInList(friendsList, x.value);

      if (y == 1)
      {
        alert("friend already exists in your current list");
      }
      else if (y == 2)
      {
        friendsList.push(x.value);
        newFriends = friendsList.toString();
        localStorage.setItem("friendsList", newFriends);
        UpdateFriendsList(newFriends);
      }

    }

  });

});

function CheckUserExists(response, inputEmail)
{
  for (let i = 0; i < response.length; i++)
  {
    if (response[i].useremail === inputEmail)
    {
      return 1;
    }
  }
  return 2;
}

function CheckFriendInList(friendsList, inputEmail)
{
  for (z = 0; z < friendsList.length; z++)
  {
    if (friendsList[z] === inputEmail)
    {
      return 1;
    }
  }
  return 2;
}

function UpdateFriendsList(newFriends)
{
console.log(newFriends);

    var jsondata = {
        "friendsList": newFriends,
        "userAvatar": localStorage.getItem("userAvatar"),
        "userMembership": localStorage.getItem("userMembership"),
        "userPoints": localStorage.getItem("userPoints"),
        "useremail": localStorage.getItem("userName"),
        "userpass": localStorage.getItem("userPass"),
        "userTokens": localStorage.getItem("userTokens"),
    };
    var settings = {
    "async": true,
    "crossDomain": true,
    "url": "https://studentcrud-a7cf.restdb.io/rest/nonegoidassignment/" + localStorage.getItem("userID"),
    "method": "PUT",
    "headers": {
      "content-type": "application/json",
      "x-apikey": "5ffd5eb61346a1524ff12901",
      "cache-control": "no-cache"
        },
        "processData": false,
        "data": JSON.stringify(jsondata)
    }

  $.ajax(settings).done(function (response) {
    console.log(response);

    $('#deleteFriendTab').hide();
    $('#cfmDelFriends').hide();
    $('#addFriendForm').hide();
    $('#submitAddFriends').hide();
    alert("Refresh Page once again to get updated friendsList");
  });
}

function makeChanges()
{
    var changeEmail = document.getElementById("inputEmail").value;
    var changePass = document.getElementById("inputPass").value;

    var jsondata = {
        "friendsList": localStorage.getItem("friendsList"),
        "userAvatar": localStorage.getItem("userAvatar"),
        "userMembership": localStorage.getItem("userMembership"),
        "userPoints": localStorage.getItem("userPoints"),
        "useremail": changeEmail,
        "userpass": changePass,
        "userTokens": localStorage.getItem("userTokens"),
        };
        var settings = {
        "async": true,
        "crossDomain": true,
        "url": "https://studentcrud-a7cf.restdb.io/rest/nonegoidassignment/" + localStorage.getItem("userID"),
        "method": "PUT",
        "headers": {
        "content-type": "application/json",
        "x-apikey": "5ffd5eb61346a1524ff12901",
        "cache-control": "no-cache"
            },
            "processData": false,
            "data": JSON.stringify(jsondata)
        }

    $.ajax(settings).done(function (response) {
        console.log(response);
        refreshData();
        alert("Refresh Page once again to get updated Account Details");
    });

}

function makeChangesAvatar(newAvatarsrc)
{

    var jsondata = {
        "friendsList": localStorage.getItem("friendsList"),
        "userAvatar": newAvatarsrc,
        "userMembership": localStorage.getItem("userMembership"),
        "userPoints": localStorage.getItem("userPoints"),
        "useremail": localStorage.getItem("userName"),
        "userpass": localStorage.getItem("userPass"),
        "userTokens": localStorage.getItem("userTokens"),
        };
        var settings = {
        "async": true,
        "crossDomain": true,
        "url": "https://studentcrud-a7cf.restdb.io/rest/nonegoidassignment/" + localStorage.getItem("userID"),
        "method": "PUT",
        "headers": {
        "content-type": "application/json",
        "x-apikey": "5ffd5eb61346a1524ff12901",
        "cache-control": "no-cache"
            },
            "processData": false,
            "data": JSON.stringify(jsondata)
        }

    $.ajax(settings).done(function (response) {
        console.log(response);
        refreshData();
        alert("Refresh Page once again to get updated Account Details");
    });

}


  </script>
</body>
</html>